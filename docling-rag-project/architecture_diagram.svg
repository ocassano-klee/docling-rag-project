<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600">
  <defs>
    <style>
      .title { font: bold 20px sans-serif; fill: #333; }
      .subtitle { font: bold 14px sans-serif; fill: #555; }
      .text { font: 12px sans-serif; fill: #666; }
      .box { fill: #f0f8ff; stroke: #4682b4; stroke-width: 2; }
      .storage { fill: #fff8dc; stroke: #daa520; stroke-width: 2; }
      .process { fill: #f0fff0; stroke: #32cd32; stroke-width: 2; }
      .arrow { stroke: #333; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" class="title">Architecture RAG - Docling + Neptune + OpenSearch</text>
  
  <!-- INGESTION SECTION -->
  <text x="50" y="70" class="subtitle">INGESTION</text>
  
  <!-- PDF Input -->
  <rect x="50" y="80" width="100" height="60" class="box" rx="5"/>
  <text x="100" y="105" text-anchor="middle" class="text">PDF</text>
  <text x="100" y="125" text-anchor="middle" class="text">(Local/S3)</text>
  
  <!-- Docling -->
  <rect x="200" y="80" width="120" height="60" class="process" rx="5"/>
  <text x="260" y="105" text-anchor="middle" class="text">Docling</text>
  <text x="260" y="125" text-anchor="middle" class="text">Parser</text>
  
  <!-- Chunks -->
  <rect x="370" y="80" width="120" height="60" class="process" rx="5"/>
  <text x="430" y="105" text-anchor="middle" class="text">Chunks +</text>
  <text x="430" y="125" text-anchor="middle" class="text">Annotations</text>
  
  <!-- Arrows Ingestion -->
  <path d="M 150 110 L 200 110" class="arrow"/>
  <path d="M 320 110 L 370 110" class="arrow"/>
  
  <!-- Embeddings -->
  <rect x="540" y="80" width="120" height="60" class="process" rx="5"/>
  <text x="600" y="105" text-anchor="middle" class="text">Embedding</text>
  <text x="600" y="125" text-anchor="middle" class="text">Generator</text>
  
  <path d="M 490 110 L 540 110" class="arrow"/>
  
  <!-- Storage Layer -->
  <text x="50" y="200" class="subtitle">STOCKAGE</text>
  
  <!-- Neptune -->
  <rect x="100" y="220" width="150" height="100" class="storage" rx="5"/>
  <text x="175" y="245" text-anchor="middle" class="subtitle">Neptune</text>
  <text x="175" y="265" text-anchor="middle" class="text">• Documents</text>
  <text x="175" y="285" text-anchor="middle" class="text">• Chunks</text>
  <text x="175" y="305" text-anchor="middle" class="text">• Annotations</text>
  
  <!-- OpenSearch -->
  <rect x="450" y="220" width="150" height="100" class="storage" rx="5"/>
  <text x="525" y="245" text-anchor="middle" class="subtitle">OpenSearch</text>
  <text x="525" y="265" text-anchor="middle" class="text">• Embeddings</text>
  <text x="525" y="285" text-anchor="middle" class="text">• Content</text>
  <text x="525" y="305" text-anchor="middle" class="text">• KNN Index</text>
  
  <!-- Arrows to storage -->
  <path d="M 430 140 L 430 180 L 175 180 L 175 220" class="arrow"/>
  <path d="M 600 140 L 600 180 L 525 180 L 525 220" class="arrow"/>
  
  <!-- QUERY SECTION -->
  <text x="50" y="380" class="subtitle">INTERROGATION</text>
  
  <!-- Question -->
  <rect x="50" y="400" width="100" height="60" class="box" rx="5"/>
  <text x="100" y="425" text-anchor="middle" class="text">Question</text>
  <text x="100" y="445" text-anchor="middle" class="text">Utilisateur</text>
  
  <!-- Embedding Query -->
  <rect x="200" y="400" width="120" height="60" class="process" rx="5"/>
  <text x="260" y="425" text-anchor="middle" class="text">Embedding</text>
  <text x="260" y="445" text-anchor="middle" class="text">Question</text>
  
  <!-- OpenSearch Search -->
  <rect x="370" y="400" width="120" height="60" class="process" rx="5"/>
  <text x="430" y="420" text-anchor="middle" class="text">OpenSearch</text>
  <text x="430" y="440" text-anchor="middle" class="text">Similarité</text>
  <text x="430" y="455" text-anchor="middle" class="text">(Cosinus)</text>
  
  <!-- Neptune Annotations -->
  <rect x="540" y="400" width="120" height="60" class="process" rx="5"/>
  <text x="600" y="420" text-anchor="middle" class="text">Neptune</text>
  <text x="600" y="440" text-anchor="middle" class="text">Annotations</text>
  
  <!-- Augmented Prompt -->
  <rect x="325" y="510" width="150" height="60" class="box" rx="5"/>
  <text x="400" y="535" text-anchor="middle" class="subtitle">Prompt</text>
  <text x="400" y="555" text-anchor="middle" class="text">Augmenté</text>
  
  <!-- Arrows Query -->
  <path d="M 150 430 L 200 430" class="arrow"/>
  <path d="M 320 430 L 370 430" class="arrow"/>
  <path d="M 490 430 L 540 430" class="arrow"/>
  
  <!-- Connection to storage -->
  <path d="M 430 400 L 430 380 L 525 380 L 525 320" class="arrow"/>
  <path d="M 600 400 L 600 380 L 175 380 L 175 320" class="arrow"/>
  
  <!-- To final prompt -->
  <path d="M 600 460 L 600 540 L 475 540" class="arrow"/>
  
  <!-- Legend -->
  <text x="650" y="500" class="subtitle">Légende:</text>
  <rect x="650" y="510" width="30" height="20" class="box"/>
  <text x="690" y="525" class="text">Entrée/Sortie</text>
  <rect x="650" y="540" width="30" height="20" class="process"/>
  <text x="690" y="555" class="text">Traitement</text>
  <rect x="650" y="570" width="30" height="20" class="storage"/>
  <text x="690" y="585" class="text">Stockage</text>
</svg>
